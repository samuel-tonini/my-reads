(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{5442:function(e,t,n){e.exports=n(5602)},5602:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(24),i=n.n(o),l=n(5609),c=n(114),s=n.n(c),u=n(148),h=n(155),m=n(48),f=n(25),p=n(26),d=n(29),b=n(27),g=n(30),v=n(5607),E=n(84),k=n(5),w=n(38),y=n.n(w),S=n(93),O=n(19),j=n(15),x=n(44),C=n.n(x),T=function(e){var t=e.text,n=e.variant,a=e.color,o=e.className,i=e.align,l=e.noWrap;return r.a.createElement(C.a,{align:i,variant:n,color:a,className:o,noWrap:l},t)};T.defaultProps={color:"default",className:"",align:"inherit",noWrap:!1};var N=T,L=n(69),F=n.n(L),R=n(66),B=n.n(R),I=n(67),P=n.n(I),D=n(68),q=n.n(D),A=Object(k.withStyles)(function(e){return{margin:{margin:2*e.spacing.unit}}},{withTheme:!0})(function(e){var t=e.item,n=t.id,a=t.count,o=t.text,i=t.icon,l=e.classes.margin,c=e.onShelfFilter;return r.a.createElement(B.a,{button:!0,onClick:function(){c(n)}},r.a.createElement(P.a,null,r.a.createElement(j.b,{className:l,badgeContent:a,color:"secondary"},i)),r.a.createElement(q.a,{primary:o}))}),M=function(e){var t=e.list,n=e.onShelfFilter;return r.a.createElement(F.a,null,t.map(function(e){var t=e.id;return r.a.createElement(A,{key:t,item:e,onShelfFilter:n})}))},_=function(e){var t=e.list,n=e.onShelfFilter,o=e.classes,i=o.toolbar,l=o.drawer,c=o.drawerPaper,s=e.container,u=e.drawerOpen,h=e.onDrawerToggle,m=r.a.createElement(a.Fragment,null,r.a.createElement("div",{className:i},r.a.createElement(N,{variant:"h5",align:"center",text:r.a.createElement("a",{href:"https://github.com/samuel-tonini/my-reads"},"My Reads")}),r.a.createElement(N,{variant:"h6",align:"center",color:"textSecondary",text:r.a.createElement("a",{href:"https://github.com/samuel-tonini"},"by: Samuel Tonini")})),r.a.createElement(j.d,null),r.a.createElement(M,{list:t,onShelfFilter:n}));return r.a.createElement("nav",{className:l},r.a.createElement(j.f,{smUp:!0,implementation:"css"},r.a.createElement(j.e,{container:s,variant:"temporary",anchor:"left",open:u,onClose:h,classes:{paper:c},ModalProps:{keepMounted:!0}},m)),r.a.createElement(j.f,{xsDown:!0,implementation:"css"},r.a.createElement(j.e,{classes:{paper:c},variant:"permanent",open:!0},m)))};_.defaultProps={container:null};var W=Object(k.withStyles)(function(e){return{drawer:Object(O.a)({},e.breakpoints.up("sm"),{width:240,flexShrink:0}),toolbar:e.mixins.toolbar,drawerPaper:{width:240}}},{withTheme:!0})(_),$=n(70),G=n.n($),U=n(37),J=n.n(U),Q=n(5611),Y=function(e){var t=e.text,n=e.icon,a=e.onClick,o=e.color,i=e.className;return r.a.createElement(j.g,{"aria-label":t,onClick:a,color:o,className:i},n)};Y.defaultProps={text:"",className:"",color:"default"};var z=Y,H=Object(Q.a)(Object(k.withStyles)(function(e){return{appBar:Object(O.a)({marginLeft:240},e.breakpoints.up("sm"),{width:"calc(100% - ".concat(240,"px)")}),menuButton:Object(O.a)({marginRight:20},e.breakpoints.up("sm"),{display:"none"}),title:{flex:1}}},{withTheme:!0})(function(e){var t=e.classes,n=t.appBar,a=t.menuButton,o=t.title,i=e.onDrawerToggle,l=e.history;return r.a.createElement(j.a,{position:"fixed",className:n},r.a.createElement(j.i,null,r.a.createElement(z,{color:"inherit",text:"Exibir Menu",onClick:i,className:a,icon:r.a.createElement(G.a,null)}),r.a.createElement(N,{variant:"h6",color:"inherit",noWrap:!0,className:o,text:"Livros"}),r.a.createElement(z,{color:"inherit",onClick:function(){l.push("/search")},icon:r.a.createElement(J.a,null)})))})),V=n(31),X=n.n(V),K=n(46),Z=n.n(K),ee=n(79),te=n.n(ee),ne=n(75),ae=n.n(ne),re=n(76),oe=n.n(re),ie=n(71),le=n.n(ie),ce=n(72),se=n.n(ce),ue=n(73),he=n.n(ue),me=n(74),fe=n.n(me),pe=Object(k.withStyles)(function(e){return{controls:{display:"flex",alignItems:"center",paddingLeft:e.spacing.unit,paddingBottom:e.spacing.unit}}})(function(e){var t=e.book,n=e.onShelfChange,a=e.classes.controls,o=t.shelf;return r.a.createElement("div",{className:a},r.a.createElement(z,{text:"Quero ler",icon:"wantToRead"===o?r.a.createElement(le.a,null):r.a.createElement(se.a,null),onClick:function(){n(t,"wantToRead")}}),r.a.createElement(z,{text:"Lendo",icon:"currentlyReading"===o?r.a.createElement(he.a,null):r.a.createElement(fe.a,null),onClick:function(){n(t,"currentlyReading")}}),r.a.createElement(z,{text:"Lido",icon:"read"===o?r.a.createElement(ae.a,null):r.a.createElement(oe.a,null),onClick:function(){n(t,"read")}}))}),de=n(77),be=n.n(de),ge=function(e){var t=e.title,n=e.authors,a=e.classes,o=a.content,i=a.cardText;return r.a.createElement(be.a,{className:o},r.a.createElement(N,{variant:"h5",className:i,text:t}),r.a.createElement(N,{variant:"subtitle1",color:"textSecondary",className:i,text:(n||[]).join(", ")}))};ge.defaultProps={authors:[],title:""};var ve=Object(k.withStyles)(function(e){var t;return{content:{flex:"1 0 auto"},cardText:(t={},Object(O.a)(t,e.breakpoints.down("sm"),{width:100}),Object(O.a)(t,e.breakpoints.only("md"),{width:150}),Object(O.a)(t,e.breakpoints.up("lg"),{width:300}),t)}})(ge),Ee=n(78),ke=n.n(Ee),we=function(e){var t=e.image,n=e.title,a=e.classes.media;return r.a.createElement(ke.a,{className:a,image:t,title:n})};we.defaultProps={image:"",title:""};var ye=Object(k.withStyles)(function(){return{media:{width:151}}})(we),Se=Object(k.withStyles)(function(e){return{card:Object(O.a)({display:"flex"},e.breakpoints.up("lg"),{height:200}),details:{display:"flex",flexDirection:"column"},cardText:{maxWidth:300}}})(function(e){var t=e.classes,n=t.card,a=t.details,o=t.cardText,i=e.book,l=e.onShelfChange,c=i.title,s=i.authors,u=i.imageLinks?i.imageLinks.smallThumbnail:"https://affinitas.com.br/wp-content/uploads/2017/03/indisponivel.png";return r.a.createElement(te.a,{className:n},r.a.createElement("div",{className:a},r.a.createElement(ve,{title:c,authors:s,textClassName:o}),r.a.createElement(pe,{book:i,onShelfChange:l})),u&&r.a.createElement(ye,{image:u,title:c}))}),Oe=Object(k.withStyles)(function(e){return{root:{flexGrow:1},paper:{color:e.palette.text.secondary}}})(function(e){var t=e.classes,n=t.root,a=t.paper,o=e.books,i=e.onShelfChange;return r.a.createElement("div",{className:n},r.a.createElement(Z.a,{container:!0,spacing:24,justify:"center"},o.map(function(e){var t=e.id;return r.a.createElement(Z.a,{item:!0,md:"auto",key:t},r.a.createElement(X.a,{className:a},r.a.createElement(Se,{book:e,onShelfChange:i})))})))}),je=Object(k.withStyles)(function(e){return{toolbar:e.mixins.toolbar,content:{flexGrow:1,padding:3*e.spacing.unit},chip:{margin:e.spacing.unit}}},{withTheme:!0})(function(e){var t=e.classes,n=t.content,a=t.toolbar,o=t.chip,i=e.filter,l=e.onShelfChange,c=e.onShelfFilter,s=e.books;return r.a.createElement("main",{className:n},r.a.createElement("div",{className:a}),i&&r.a.createElement(j.c,{color:"primary",label:"Mostrar todos os livros",onClick:function(){return c("")},className:o}),r.a.createElement(Oe,{books:i?s.filter(function(e){return e.shelf===i}):s,onShelfChange:l}))}),xe=function(e){function t(){var e,n;Object(f.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(d.a)(this,(e=Object(b.a)(t)).call.apply(e,[this].concat(r)))).state={drawerOpen:!1},n.handleDrawerToggle=function(){n.setState(function(e){return{drawerOpen:!e.drawerOpen}})},n.wrapperShelfFilter=function(e){n.state.drawerOpen&&n.handleDrawerToggle(),(0,n.props.onShelfFilter)(e)},n}return Object(g.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this.props,t=e.classes.root,n=e.container,a=e.books,o=e.onShelfChange,i=e.filter,l=this.state.drawerOpen,c=[{text:"Quero Ler",icon:r.a.createElement(S.b,null),id:"wantToRead",count:0},{text:"Lendo",icon:r.a.createElement(S.c,null),id:"currentlyReading",count:0},{text:"Lido",icon:r.a.createElement(S.a,null),id:"read",count:0}];return c=c.map(function(e){var t=e.id,n=a.filter(function(e){return e.shelf===t}).length;return Object(E.a)({},e,{count:n})}),r.a.createElement("div",{className:t},r.a.createElement(y.a,null),r.a.createElement(H,{onDrawerToggle:this.handleDrawerToggle}),r.a.createElement(W,{list:c,onShelfFilter:this.wrapperShelfFilter,container:n,drawerOpen:l,onDrawerToggle:this.handleDrawerToggle}),r.a.createElement(je,{books:a,onShelfChange:o,onShelfFilter:this.wrapperShelfFilter,filter:i}))}}]),t}(a.Component);xe.defaultProps={container:null};var Ce=Object(k.withStyles)(function(){return{root:{display:"flex"}}},{withTheme:!0})(xe),Te=n(49),Ne=n(5608),Le=n(5610),Fe=n(151),Re=n(50),Be=n.n(Re);function Ie(){var e=Object(Te.a)(['\n  mutation update {\n    update(input: $input, id: $id) @rest(type: "Shelfs", path: "/books/:id", method: "PUT") {\n      currentlyReading\n      wantToRead\n      read\n    }\n  }\n']);return Ie=function(){return e},e}function Pe(){var e=Object(Te.a)(['\n  mutation search {\n    search(input: $input) @rest(type: "Books", path: "/search", method: "POST") {\n      books @type(name: "Book") {\n        title\n        authors\n        imageLinks @type(name: "ImageLinks") {\n          smallThumbnail\n        }\n        id\n        shelf\n      }\n    }\n  }\n']);return Pe=function(){return e},e}function De(){var e=Object(Te.a)(['\n  query get {\n    book(id: $id) @rest(type: "Books", path: "/books/:id") {\n      book @type(name: "Book") {\n        title\n        authors\n        imageLinks @type(name: "ImageLinks") {\n          smallThumbnail\n        }\n        id\n        shelf\n      }\n    }\n  }\n']);return De=function(){return e},e}function qe(){var e=Object(Te.a)(['\n  query {\n    books @rest(type: "Books", path: "/books") {\n      books @type(name: "Book") {\n        title\n        authors\n        imageLinks @type(name: "ImageLinks") {\n          smallThumbnail\n        }\n        id\n        shelf\n      }\n    }\n  }\n']);return qe=function(){return e},e}var Ae=localStorage.token;Ae||(Ae=localStorage.token=Math.random().toString(36).substr(-8));var Me={Accept:"application/json",Authorization:Ae,"Content-Type":"application/json"},_e=new Fe.RestLink({uri:"https://reactnd-books-api.udacity.com",headers:Me}),We=new Ne.a({link:_e,cache:new Le.a}),$e=Be()(qe()),Ge=Be()(De()),Ue=Be()(Pe()),Je=Be()(Ie()),Qe=function(e){return We.query({query:Ge,variables:{id:e}}).then(function(e){return e.data.book.book})},Ye=function(e,t){return We.mutate({mutation:Je,variables:{input:{shelf:t},id:e.id}}).then(function(e){return e.data.update})},ze=function(e){return We.mutate({mutation:Ue,variables:{input:{query:e}}}).then(function(e){return e.data.search.books})},He=n(83),Ve=n.n(He),Xe=n(32),Ke=function(e){function t(){var e,n;Object(f.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(d.a)(this,(e=Object(b.a)(t)).call.apply(e,[this].concat(r)))).state={pesquisa:""},n.handleInputChange=function(e){n.setState({pesquisa:e.target.value})},n.handleSubmit=function(e){e.preventDefault(),(0,n.props.onSearch)(n.state.pesquisa)},n}return Object(g.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this.props.classes,t=e.search,n=e.searchIcon,a=e.inputInput,o=e.inputRoot,i=this.state.pesquisa;return r.a.createElement("form",{className:t,onSubmit:this.handleSubmit},r.a.createElement("div",{className:n},r.a.createElement(J.a,null)),r.a.createElement(j.h,{placeholder:"Digite o nome do livro ou do(s) autor(es)",classes:{root:o,input:a},autoFocus:!0,value:i,onChange:this.handleInputChange}))}}]),t}(a.Component),Ze=Object(k.withStyles)(function(e){return{search:{position:"relative",borderRadius:e.shape.borderRadius,backgroundColor:Object(Xe.fade)(e.palette.common.white,.15),"&:hover":{backgroundColor:Object(Xe.fade)(e.palette.common.white,.25)},marginLeft:e.spacing.unit,width:"100%"},searchIcon:{width:9*e.spacing.unit,height:"100%",position:"absolute",pointerEvents:"none",display:"flex",alignItems:"center",justifyContent:"center"},inputRoot:{color:"inherit",width:"100%"},inputInput:{paddingTop:e.spacing.unit,paddingRight:e.spacing.unit,paddingBottom:e.spacing.unit,paddingLeft:10*e.spacing.unit,transition:e.transitions.create("width"),width:"100%"}}},{withTheme:!0})(Ke),et=Object(Q.a)(function(e){var t=e.history,n=e.onSearch;return r.a.createElement(j.a,{position:"fixed"},r.a.createElement(j.i,null,r.a.createElement(z,{color:"inherit",onClick:function(){t.push("/")},icon:r.a.createElement(Ve.a,null)}),r.a.createElement(N,{text:"Pesquisa",variant:"h6",color:"inherit"}),r.a.createElement(Ze,{onSearch:n})))}),tt=Object(k.withStyles)(function(e){return{toolbar:e.mixins.toolbar,content:{flexGrow:1,padding:3*e.spacing.unit}}},{withTheme:!0})(function(e){var t=e.classes,n=t.content,a=t.toolbar,o=e.onShelfChange,i=e.books;return r.a.createElement("main",{className:n},r.a.createElement("div",{className:a}),r.a.createElement(Oe,{books:i,onShelfChange:o}))}),nt=function(e){function t(){var e,n;Object(f.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(d.a)(this,(e=Object(b.a)(t)).call.apply(e,[this].concat(r)))).state={books:[]},n.handleSearch=function(e){""===e?n.setState({books:[]}):ze(e).then(function(e){var t=e&&!e.error?e:[];n.setState({books:t})})},n}return Object(g.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this.props,t=e.classes.root,n=e.books,a=e.onShelfChange,o=this.state.books;return o=o.length>0?o.map(function(e){var t=n.filter(function(t){return t.id===e.id}),a=Object(m.a)(t,1)[0];return a?Object(E.a)({},e,{shelf:a.shelf}):e}):[],r.a.createElement("div",{className:t},r.a.createElement(y.a,null),r.a.createElement(et,{onSearch:this.handleSearch}),r.a.createElement(tt,{books:o,onShelfChange:a}))}}]),t}(a.Component),at=Object(k.withStyles)(function(){return{root:{width:"100%"}}},{withTheme:!0})(nt),rt=function(e){function t(){var e,n;Object(f.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(d.a)(this,(e=Object(b.a)(t)).call.apply(e,[this].concat(r)))).state={books:[],filter:""},n.handleShelfFilter=function(e){return n.setState({filter:e})},n.handleShelfChange=function(e,t){var a=e.shelf===t?"none":t;Ye(e,a).then(function(t){var r=n.state.books;if("none"===a)n.setState({books:r.filter(function(t){return t.id!==e.id})});else{var o=t[a].filter(function(t){return t===e.id}),i=Object(m.a)(o,1)[0],l=r.filter(function(t){return t.id===e.id}),c=Object(m.a)(l,1)[0];if(i)if(c){var s=r.indexOf(c);r[s].shelf=a,n.setState({books:r})}else Qe(i).then(function(e){n.setState({books:Object(h.a)(r).concat([e])})})}})},n}return Object(g.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){var e=Object(u.a)(s.a.mark(function e(){var t;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,We.query({query:$e}).then(function(e){return e.data.books.books});case 2:t=e.sent,this.setState({books:t});case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.state,n=t.books,o=t.filter;return r.a.createElement(a.Fragment,null,r.a.createElement(v.a,{exact:!0,path:"/",render:function(){return r.a.createElement(Ce,{onShelfChange:e.handleShelfChange,books:n,onShelfFilter:e.handleShelfFilter,filter:o})}}),r.a.createElement(v.a,{exact:!0,path:"/search",render:function(){return r.a.createElement(at,{onShelfChange:e.handleShelfChange,books:n})}}))}}]),t}(a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));window.__MUI_USE_NEXT_TYPOGRAPHY_VARIANTS__=!0,i.a.render(r.a.createElement(l.a,{basename:"/my-reads"},r.a.createElement(rt,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[5442,2,1]]]);
//# sourceMappingURL=main.08a62d13.chunk.js.map